(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[364],{5244:function(e,t,r){Promise.resolve().then(r.bind(r,4462))},7648:function(e,t,r){"use strict";r.d(t,{default:function(){return s.a}});var a=r(2972),s=r.n(a)},4462:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return o}});var a=r(7437),s=r(2265),n=r(5526),i=r(9376),l=r(7648);function o(){let[e,t]=(0,s.useState)(""),[r,o]=(0,s.useState)(""),[c,d]=(0,s.useState)(""),[u,m]=(0,s.useState)(!1),[g,p]=(0,s.useState)(""),[x,h]=(0,s.useState)(!1),y=(0,i.useRouter)(),b=async t=>{t.preventDefault(),m(!0),p("");try{let{data:{user:t}}=await n.O.auth.getUser();if(!t){y.push("/auth/login");return}let a={user_id:t.id,title:e.trim(),content:r.trim(),tags:c.split(",").map(e=>e.trim()).filter(e=>e.length>0),summary:null},{data:s,error:i}=await n.O.from("notes").insert([a]).select().single();i?p(i.message):y.push("/notes/".concat(s.id))}catch(e){p("An unexpected error occurred")}finally{m(!1)}},f=async()=>{if(!r.trim()){p("Please enter some content first");return}h(!0),p("");try{let e=r.length>200?r.substring(0,200)+"...":r;console.log("Generated summary:",e),p("Summary generation would integrate with OpenAI API")}catch(e){p("Failed to generate summary")}finally{h(!1)}};return(0,a.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsx)("div",{className:"flex items-center space-x-4 mb-4",children:(0,a.jsx)(l.default,{href:"/notes",className:"text-gray-600 hover:text-gray-900",children:"â† Back to Notes"})}),(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Create New Note"}),(0,a.jsx)("p",{className:"text-gray-600 mt-2",children:"Add a new note and optionally generate an AI summary"})]}),(0,a.jsxs)("form",{onSubmit:b,className:"space-y-6",children:[g&&(0,a.jsx)("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded",children:g}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700 mb-2",children:"Title *"}),(0,a.jsx)("input",{type:"text",id:"title",required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"Enter note title...",value:e,onChange:e=>t(e.target.value)})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"content",className:"block text-sm font-medium text-gray-700 mb-2",children:"Content *"}),(0,a.jsx)("textarea",{id:"content",required:!0,rows:12,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"Enter your note content here...",value:r,onChange:e=>o(e.target.value)})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"tags",className:"block text-sm font-medium text-gray-700 mb-2",children:"Tags (comma-separated)"}),(0,a.jsx)("input",{type:"text",id:"tags",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"e.g., biology, chapter-1, important",value:c,onChange:e=>d(e.target.value)})]}),(0,a.jsx)("div",{className:"flex space-x-4",children:(0,a.jsx)("button",{type:"button",onClick:f,disabled:x||!r.trim(),className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50",children:x?"Generating...":"Generate AI Summary"})}),(0,a.jsxs)("div",{className:"flex justify-end space-x-4",children:[(0,a.jsx)(l.default,{href:"/notes",className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),(0,a.jsx)("button",{type:"submit",disabled:u,className:"px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors disabled:opacity-50",children:u?"Creating...":"Create Note"})]})]})]})}},5526:function(e,t,r){"use strict";r.d(t,{O:function(){return l}});var a=r(3887),s=r(257);let n="https://yicmvsmebwfbvxudyfbg.supabase.co",i=s.env.SUPABASE_SERVICE_ROLE_KEY,l=(0,a.eI)(n,"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InlpY212c21lYndmYnZ4dWR5ZmJnIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTg4NTIwMzEsImV4cCI6MjA3NDQyODAzMX0.UAt3E9XBgtM4b2ysEEqTLWRAm3E-g6NsQuKri86o4gk",{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"pkce"}});i&&(0,a.eI)(n,i,{auth:{autoRefreshToken:!1,persistSession:!1}})}},function(e){e.O(0,[357,972,971,117,744],function(){return e(e.s=5244)}),_N_E=e.O()}]);